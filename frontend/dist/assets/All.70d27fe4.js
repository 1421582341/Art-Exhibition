import{o as l,c as I,a as d,_ as S,d as z,r as A,m as H,b as n,e as s,u as h,t as p,w as r,q as f,l as D,T as M,F as y,k as v,B as j,i as w,s as T,x as W,y as $}from"./index.675b0fd9.js";import{s as _}from"./request.51dc9a76.js";import{r as F}from"./ChevronLeftIcon.892c695b.js";function N(c,m){return l(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})])}const V=c=>(W("data-v-d7a3c026"),c=c(),$(),c),q={class:"h-12 fixed-top flex justify-between items-center p-2 border-b z-50 bg-gray-50"},E={class:"text-base"},O={class:"fixed left-0 top-0 h-screen w-1/3 bg-white pt-12 flex flex-col"},R=["onClick"],G={class:"img-container"},J=["onClick"],K={class:"flex items-center justify-center"},P=V(()=>s("div",{class:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full m-12",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),Q=[P],U=z({__name:"All",setup(c){const m=j();let o=0;const e=A({imgList:new Array,isBusy:!1,aside:!1,category:0});async function x(t){const{scrollTop:i,clientHeight:u,scrollHeight:a}=t.target;if(i+u>=a-50&&e.isBusy===!1){e.isBusy=!0;const{imgList:g}=await _({method:"get",url:"/getWaterfall",params:{page:o,category:e.category}});e.imgList=e.imgList.concat(g),e.isBusy=!1,o++}}H(async()=>{const{id:t}=m.params;t&&(e.category=t);const{imgList:i}=await _({method:"get",url:"/getWaterfall",params:{page:o,category:e.category}});e.imgList=i,o++});function b(){w.go(-1)}function k(){e.aside=!0}function L(){e.aside=!1}function B(t){localStorage.setItem("img",t),w.push("/detail/10000")}async function C(t){e.category=t,e.imgList=[],o=0;const{imgList:i}=await _({method:"get",url:"/getWaterfall",params:{page:o,category:e.category}});e.imgList=i,e.aside=!1}return(t,i)=>{const u=T("lazy");return l(),n("div",{class:"h-screen w-full overflow-y-auto flex justify-center",onScroll:i[0]||(i[0]=a=>x(a))},[s("header",q,[d(h(F),{class:"h-full",onClick:b}),s("span",E,"category"+p(e.category),1),d(h(N),{class:"h-full",onClick:k})]),r(s("div",{class:"fixed right-0 top-0 h-screen w-full bg-black opacity-25",onClick:L},null,512),[[f,e.aside]]),d(M,{"enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutLeft"},{default:D(()=>[r(s("aside",O,[(l(),n(y,null,v([0,1,2,3],a=>s("div",{class:"h-12 leading-12 border-b text-center",onClick:g=>C(a)}," category"+p(a),9,R)),64))],512),[[f,e.aside]])]),_:1}),s("section",G,[(l(!0),n(y,null,v(e.imgList,a=>r((l(),n("img",{class:"w-full h-auto mt-2",onClick:g=>B(a)},null,8,J)),[[u,a]])),256))]),r(s("div",K,Q,512),[[f,e.isBusy]])],32)}}});var ee=S(U,[["__scopeId","data-v-d7a3c026"]]);export{ee as default};
