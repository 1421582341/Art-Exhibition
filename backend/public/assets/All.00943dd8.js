import{d as b,r as k,k as I,b as i,e as s,a as r,u,w as m,s as h,q as C,T as B,F as c,m as d,o as l,t as L,j as p}from"./index.cdb7393c.js";import{s as _}from"./request.8e5fb5a1.js";import{r as A}from"./ChevronLeftIcon.191c90a7.js";import{r as S}from"./MenuIcon.e62aff48.js";const j={class:"h-12 fixed-top flex justify-between items-center p-2 border-b z-50 bg-gray-50"},D=s("span",{class:"text-base"},"category1",-1),T={class:"fixed left-0 top-0 h-screen w-1/3 bg-white pt-12 flex flex-col"},$={class:"h-12 leading-12 border-b text-center"},F={class:"mt-12 grid grid-cols-2 gap-2 mx-2"},H={class:"flex flex-col"},N=["src","onClick"],V=["src","onClick"],W=s("div",{class:"flex items-center justify-center"},[s("div",{class:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full m-12",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])],-1),G=b({__name:"All",setup(q){const e=k({page:0,leftImg:new Array,rightImg:new Array,isBusy:!1,aside:!1});async function v(a){const{scrollTop:n,clientHeight:t,scrollHeight:o}=a.target;if(n+t===o){e.isBusy=!0;const{imgList:f}=await _({method:"get",url:"/getWaterfall",params:{page:e.page}});e.leftImg=e.leftImg.concat(f.slice(0,10)),e.rightImg=e.rightImg.concat(f.slice(10,20)),e.isBusy=!1,e.page++}}I(async()=>{const{imgList:a}=await _({method:"get",url:"/getWaterfall",params:{page:e.page}});e.leftImg=a.slice(0,10),e.rightImg=a.slice(10,20),e.page++});function w(){p.go(-1)}function y(){e.aside=!0}function x(){e.aside=!1}function g(a){localStorage.setItem("img",a),p.push("/detail/10000")}return(a,n)=>(l(),i("div",{class:"h-screen w-full overflow-y-auto",onScroll:n[0]||(n[0]=t=>v(t))},[s("header",j,[r(u(A),{class:"h-full",onClick:w}),D,r(u(S),{class:"h-full",onClick:y})]),m(s("div",{class:"fixed right-0 top-0 h-screen w-full bg-black opacity-25",onClick:x},null,512),[[h,e.aside]]),r(B,{"enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutLeft"},{default:C(()=>[m(s("aside",T,[(l(),i(c,null,d([0,1,2,3],t=>s("div",$,"category"+L(t),1)),64))],512),[[h,e.aside]])]),_:1}),s("div",F,[s("div",H,[(l(!0),i(c,null,d(e.leftImg,t=>(l(),i("img",{class:"w-full h-auto mt-2",src:t,onClick:o=>g(t)},null,8,N))),256))]),s("div",null,[(l(!0),i(c,null,d(e.rightImg,t=>(l(),i("img",{class:"w-full h-auto mt-2",src:t,onClick:o=>g(t)},null,8,V))),256))])]),W],32))}});export{G as default};
